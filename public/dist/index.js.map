{"mappings":"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","sources":["public/js/index.js","public/js/login.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","public/js/alerts.js","public/js/mapbox.js","public/js/logout.js","public/js/updateSettings.js","public/js/mercadopago.js"],"sourcesContent":["/*eslint-disable*/\r\n// console.log('Hello from index.js parcel');\r\nimport { displayMap } from './mapbox';\r\nimport { login } from './login';\r\nimport { logout } from './logout';\r\nimport { updateSettings } from './updateSettings';\r\nimport { bookTour } from './mercadopago';\r\n\r\n/**\r\n * ===========================\r\n * 1. MAP DISPLAY\r\n * ===========================\r\n */\r\nconst mapBox = document.getElementById('map');\r\nif (mapBox) {\r\n  // Parse locations from data attribute and display map\r\n  const locations = JSON.parse(mapBox.dataset.locations);\r\n  displayMap(locations);\r\n}\r\n\r\n/**\r\n * ===========================\r\n * 2. LOGIN FORM HANDLING\r\n * ===========================\r\n */\r\nconst loginForm = document.querySelector('.form--login');\r\nif (loginForm) {\r\n  loginForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    // Get email and password values\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    // Call login function\r\n    login(email, password);\r\n  });\r\n}\r\n\r\n/**\r\n * ===========================\r\n * 3. LOGOUT BUTTON HANDLING\r\n * ===========================\r\n */\r\nconst logoutBtn = document.querySelector('.nav__el--logout');\r\nif (logoutBtn) {\r\n  logoutBtn.addEventListener('click', logout);\r\n}\r\n\r\n/**\r\n * ===========================\r\n * 4. UPDATE USER DATA FORM\r\n * ===========================\r\n */\r\nconst userDataForm = document.querySelector('.form-user-data');\r\nif (userDataForm) {\r\n  userDataForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    // Create FormData object for multipart/form-data\r\n    const form = new FormData();\r\n    const name = document.getElementById('name').value;\r\n    const email = document.getElementById('email').value;\r\n    const photo = document.getElementById('photo').files[0];\r\n\r\n    form.append('name', name);\r\n    form.append('email', email);\r\n    form.append('photo', photo);\r\n\r\n    // Update user settings\r\n    const res = await updateSettings(form, 'data');\r\n\r\n    // Update user name in navigation bar\r\n    const userName = document.querySelector('.nav__user-name');\r\n    if (userName && res.data.user) {\r\n      const firstName = res.data.user.name.split(' ')[0];\r\n      userName.textContent = firstName;\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * ===========================\r\n * 5. UPDATE USER PASSWORD FORM\r\n * ===========================\r\n */\r\nconst userPasswordForm = document.querySelector('.form-user-password');\r\nif (userPasswordForm) {\r\n  userPasswordForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    // Indicate updating state\r\n    document.querySelector('.btn--save-password').textContent = 'Updating...';\r\n    // Get password fields\r\n    const passwordCurrent = document.getElementById('password-current').value;\r\n    const password = document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById('password-confirm').value;\r\n    // Update password\r\n    await updateSettings({ passwordCurrent, password, passwordConfirm }, 'password');\r\n    // Reset button and fields\r\n    document.querySelector('.btn--save-password').textContent = 'Save password';\r\n    document.getElementById('password-current').value = '';\r\n    document.getElementById('password').value = '';\r\n    document.getElementById('password-confirm').value = '';\r\n  });\r\n}\r\n\r\n/**\r\n * ===========================\r\n * 6. BOOKING A TOUR\r\n * ===========================\r\n */\r\nconst bookBtn = document.getElementById('book-tour');\r\n\r\nif (bookBtn) {\r\n  bookBtn.addEventListener('click', (e) => {\r\n    e.target.textContent = 'Processing...';\r\n    const { tourId } = e.target.dataset;\r\n    console.log(`Booking tour with ID: ${tourId}`);\r\n    bookTour(tourId);\r\n  });\r\n}\r\n","/*eslint-disable*/\nimport { showAlert } from './alerts';\nexport const login = async (email, password) => {\n  console.log(email, password);\n  try {\n    const res = await fetch('/api/v1/users/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ email, password }),\n    });\n\n    // Lanzamos un error si la respuesta es >= 400\n    if (!res.ok) {\n      const errorData = await res.json();\n      throw new Error(errorData.message || 'Ocurrió un error al iniciar sesión.');\n    }\n\n    // Mostrar mensaje de éxito\n    showAlert('success', 'Inicio de sesión exitoso. Redirigiendo...');\n\n    // Si todo salió bien\n    window.setTimeout(() => {\n      location.assign('/');\n    }, 1500);\n  } catch (err) {\n    // Captura errores de red y errores manuales\n    // alert(`Error: ${err.message}`);\n    console.error('Error en login:', err);\n    // Mostrar mensaje de error\n    showAlert(\n      'error',\n      err.message || 'Error al iniciar sesión. Por favor, inténtelo de nuevo más tarde.',\n    );\n  }\n};\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","//type is success or error\r\n\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) {\r\n    el.parentElement.removeChild(el);\r\n  }\r\n};\r\n\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert(); // Remove existing alert if any\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000); // Remove alert after 5 seconds\r\n};\r\n","/*eslint-disable*/\r\nconsole.log('Mapbox script loaded');\r\n\r\nexport const displayMap = (locations) => {\r\n  mapboxgl.accessToken =\r\n    'pk.eyJ1IjoiZGllZ28tbXAtYm94IiwiYSI6ImNtYTZ4aXlsMDB3bjIya3BvOHZla3I1MjAifQ.b6616SGWco2YPQ-a5FUb0A';\r\n  const map = new mapboxgl.Map({\r\n    container: 'map', // container ID\r\n    style: 'mapbox://styles/diego-mp-box/cma7ji7xl006o01sbaxyrh1vy', // style URL\r\n    // center: [-74.5, 40], // starting position [lng, lat]\r\n    // zoom: 10, // starting zoom\r\n    // interactive: false,\r\n    scrollZoom: false, // disable scroll zoom\r\n    // dragPan: false, // disable drag pan\r\n    // dragRotate: false, // disable drag rotate\r\n    // pitchWithRotate: false, // disable pitch with rotate\r\n    // boxZoom: false, // disable box zoom\r\n    //desactivar zoom al hacer doble click\r\n    doubleClickZoom: false, // disable double click zoom\r\n  });\r\n\r\n  //esto linea lo que hace es que el mapa se ajuste a los limites de los marcadores\r\n  const bounds = new mapboxgl.LngLatBounds();\r\n\r\n  locations.forEach((loc) => {\r\n    // Create marker\r\n    const el = document.createElement('div');\r\n    el.className = 'marker';\r\n\r\n    // Add marker to map\r\n    new mapboxgl.Marker({\r\n      element: el,\r\n      anchor: 'bottom',\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .addTo(map);\r\n\r\n    // Add popup\r\n    new mapboxgl.Popup({\r\n      offset: 30, // this is the distance from the marker to the popup\r\n      //opciones de la ventana emergente\r\n      // closeButton: false, // no close button\r\n      // closeOnClick: false, // no close on click\r\n    })\r\n      .setLngLat(loc.coordinates) // this is the location of the popup\r\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`) // this is the content of the popup\r\n      .addTo(map); // this adds the popup to the map\r\n\r\n    // Extend map bounds to include current location\r\n    bounds.extend(loc.coordinates);\r\n  });\r\n\r\n  // Fit map to bounds\r\n  map.fitBounds(bounds, {\r\n    padding: {\r\n      top: 200,\r\n      bottom: 150,\r\n      left: 100,\r\n      right: 100,\r\n    },\r\n  });\r\n};\r\n","import { showAlert } from './alerts.js';\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await fetch('/api/v1/users/logout', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    // Lanzamos un error si la respuesta es >= 400\r\n    if (!res.ok) {\r\n      const errorData = await res.json();\r\n      throw new Error(errorData.message || 'Ocurrió un error al cerrar sesión.');\r\n    }\r\n\r\n    // Mostrar mensaje de éxito\r\n    showAlert('success', 'Cierre de sesión exitoso. Redirigiendo...');\r\n\r\n    // Si todo salió bien\r\n    window.setTimeout(() => {\r\n      location.assign('/');\r\n    }, 1500);\r\n  } catch (err) {\r\n    // Captura errores de red y errores manuales\r\n    console.error('Error en logout:', err);\r\n    // Mostrar mensaje de error\r\n    showAlert(\r\n      'error',\r\n      err.message || 'Error al cerrar sesión. Por favor, inténtelo de nuevo más tarde.',\r\n    );\r\n  }\r\n};\r\n","/*eslint-disable*/\r\nimport { showAlert } from './alerts';\r\n\r\n//type is password or data\r\nexport const updateSettings = async (data, type) => {\r\n  // console.log(email, password);\r\n  try {\r\n    const url = type === 'password' ? '/api/v1/users/updatePassword' : '/api/v1/users/updateMe';\r\n    const options = {\r\n      method: 'PATCH',\r\n    };\r\n\r\n    if (type === 'password') {\r\n      // Enviamos JSON\r\n      options.headers = {\r\n        'Content-Type': 'application/json',\r\n      };\r\n      options.body = JSON.stringify(data); // Convertimos a JSON\r\n    } else {\r\n      // Enviamos FormData (por ejemplo, con imagen)\r\n      options.body = data;\r\n    }\r\n\r\n    const res = await fetch(url, options);\r\n\r\n    // Lanzamos un error si la respuesta es >= 400\r\n    if (!res.ok) {\r\n      const errorData = await res.json();\r\n      throw new Error(errorData.message || 'Ocurrió un error al actualizar los datos.');\r\n    }\r\n\r\n    // Mostrar mensaje de éxito\r\n    const msgAlert =\r\n      type === 'password'\r\n        ? 'Contraseña actualizada correctamente.'\r\n        : 'Datos actualizados correctamente.';\r\n    showAlert('success', msgAlert);\r\n\r\n    //devolver con return para que se pueda usar en el index.js\r\n    return res.json();\r\n  } catch (err) {\r\n    // Captura errores de red y errores manuales\r\n    // alert(`Error: ${err.message}`);\r\n    console.error('Error en updateMe:', err);\r\n    // Mostrar mensaje de error\r\n    showAlert(\r\n      'error',\r\n      err.message || 'Error al actualizar los datos. Por favor, inténtelo de nuevo más tarde.',\r\n    );\r\n  }\r\n};\r\n","//public/js/stripe.js\n/* eslint-disable */\n\nconst bookTour = async (tourId) => {\n  try {\n    // 1) Solicitar la URL de pago de Mercado Pago desde la API\n    const response = await fetch(`/api/v1/bookings/create-preference/${tourId}`, {\n      method: 'get',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    const { data, status } = await response.json();\n    console.log(data.init_point);\n    if (status === 'success') {\n      // 2) Redirigir al usuario a la URL de pago de Mercado Pago\n      window.location.href = data.init_point; // esta es la URL de Mercado Pago para el pago\n    } else {\n      alert('Error al crear la preferencia de pago');\n    }\n  } catch (err) {\n    console.log(err);\n    alert('Error al procesar el pago');\n  }\n};\n\nmodule.exports = { bookTour };\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"/__parcel_source_root/"}